LPMLはXMLの文法を少し緩和したもので、そのパーサをparser.pyに定義しています。
LPMLの意義は、論文にも書いたとおり

- 機械的にパース可能なテキストをLLMに出力させることによる、LLMと計算機の関係強化
- タグによりその内容を明確化し、各セクションを独立させる。
- タグ定義によるLLMへの指示の簡略化、LLMを「プログラムする」こと

などです。

さて、私はこれを用いて、LLMを自律的に機能させるための汎用フレームワークを実装しようと思っています。
そのフレームワークの基本的単位は「コンテクスト」と呼ばれ、その中で、論文にも書いたようなLLMとシステムとの間の対話が実行され、結論が導かれます。
コンテクストは更にサブコンテクストを生成することができ、コンテクスト同士が連携することで、高度な知的処理が実現されます。

各コンテクストにおいて、LLMにはLPML形式のプロンプトが与えられます。ファイルの読み書き、コード実行などのタグが定義されており、LLMはそれを用いて、メモ書きを残したりターミナル操作やプログラム実行ができます。
また、コンテクスト作成タグも存在し、必要に応じて、課題をサブコンテクストに投げることもできます。
コンテクストはコンテクストマネージャによって管理されます。各コンテクストは別プロセスとして動作し、非同期的に実行されます。コンテクストは自分の親コンテクストや子コンテクストを認識することができ、自分の出した結論や問いかけを送信することができます。
コンテクスト間のやり取りは例えば send タグが担います。コンテクストAがBにメッセージを送ると、コンテクストBのシステムはAに対するメッセージを出力するのです。
コンテクストにはルートコンテクストが存在し、それが基本的にはユーザーとのやり取りを担います。ただし、ユーザーとのやり取りもまた、コード実行のように一つのタグ＝機能として実装されることが重要です。本システムに置いて、人間との対話は特別な処理ではなく、自律的に動作する上での（他の機能と対等な）一つの機能でしかありません。
コンテクストマネージャはまた、スケジュールされたコンテクストの実行なども行います。定期的な情報の整理や、ユーザーに求められたリマインダの実行などがこれにより実現されます。多くのLLMエージェントはユーザーからの問いかけをトリガーとして作動しますが、この仕組みは、そのようなあり方を一歩先に進め、より高度な自立行動を可能にするものです。

さらに本プロジェクトの重要な目的として、LLM自身に自己を改修させ、機能を高度化していくことが含まれます。本プロジェクトはLLM自身に書き換え可能なプロジェクトディレクトリという形で実行され、LLMはファイル操作タグを用いて、自分自身のプロンプトや知識ベース、タグとそれに対応する新機能の関数、などを改良します。LLM自身に自己を実行する基盤を開示し、反省可能にすることで、より高度な自立作業を可能とします。これに当たり、プロジェクトディレクトリには「LLMによって改変不可能な基底プロンプトやコア関数」と、「LLMにより自由に書き換え可能なworkspace」の区別を導入します。

稼働を続けるに従いディレクトリは複雑になっていくことが予想されるため、LLM自身に適切な情報ルーティングプロセスを考案させることが重要です。ハブとなるメモを作成し、そこからリンクをたどることで、コンテクスト長を節約しながら、必要な知識に到達するための方法論をLLMは生み出さなければなりません。

まとめると、本プロジェクトでやらねばならないことは

1. コンテクストとその管理の仕組みの実装
2. 基本的なタグとそれを実現する関数群の実装
3. 適切なLPMLプロンプトの執筆

の３点です。